<link rel="import" href="left-swipe-action-button.html">

<polymer-element name="left-swipe-action">
    <template>
        <style>
            :host {
                position: relative;
                width: 100%;
            }

            .swipe-underlay {
                position: absolute;
                width: 75%;
                height: 100%;
                right: 0;
                display: table;
            }

            .swipe-content {
                position: relative;
            }

            .swipe-content.open-true {
                -webkit-transform: translate3d(-80%, 0, 0);
                -webkit-transition: -webkit-transform 400ms cubic-bezier(0, 0, 0.25, 1);
            }

            .swipe-content.open-false {
                -webkit-transform: translate3d(0, 0, 0);
                -webkit-transition: -webkit-transform 400ms cubic-bezier(0, 0, 0.25, 1);
            }
        </style>

        <div class="swipe-underlay" layout horizontal reverse center>
            <content select="left-swipe-action-button"></content>
        </div>
        <div class="swipe-content open-{{open}}" on-tap="{{contentTapped}}">
            <content></content>
        </div>
    </template>
    <script>

        Polymer({

            open: false,

            eventDelegates: {
                down: 'downAction',
                track: 'trackAction',
                up: 'upAction'
            },

            ready: function() {

            },

            downAction: function(e){
                if(e.target.localName == "left-swipe-action-button"){
                    return;
                }
                // setup move event
                console.log("down");
                console.log("e.x: " + e.x);
                console.log("e.screenX: " + e.screenX);
                console.log("e.clientX: " + e.clientX);
                // store current position
                this._point = {x: e.x};
            },

            trackAction: function(e){
                console.log("track");
                console.log("e.x: " + e.x);
                console.log("e.screenX: " + e.screenX);
                console.log("e.clientX: " + e.clientX);
                if(this._point){
                    console.log(e.x);
                }
            },

            upAction: function(e){
                // detach move event
                this._point = null;
                if(e.target.localName == "left-swipe-action-button"){
                    return;
                }
                console.log("up");
                console.log(e);
            },

            contentTapped: function(event, detail, sender) {
                console.log(arguments);

                this.open = !this.open;
            }
        });
    </script>
</polymer-element>